# üîß Quick Fix - –û—à–∏–±–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

‚úÖ **–û—à–∏–±–∫–∞ 500 Internal Server Error**
   - –£–±—Ä–∞–Ω `type` statement (Python 3.12+)
   - –£–±—Ä–∞–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è OpenAI –∫–ª—é—á–∞ –≤ config_flow
   - –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤–Ω—É—Ç—Ä—å —Ñ—É–Ω–∫—Ü–∏–π
   - –ò–∑–º–µ–Ω–µ–Ω —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (runtime_data ‚Üí hass.data)

‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pydantic)**
   - –£–±—Ä–∞–Ω pydantic –∏–∑ requirements (–∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ HA)
   - –ò–∑–º–µ–Ω–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ —Å `==` –Ω–∞ `>=` –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
   - –£–±—Ä–∞–Ω aiohttp (–≤—Å—Ç—Ä–æ–µ–Ω –≤ HA Core)

## –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```bash
cd /config/custom_components
rm -rf openai_voice_proxy
cp -r /path/to/updated/custom_components/openai_voice_proxy ./
```

–ò–ª–∏ —á–µ—Ä–µ–∑ HACS:
- HACS ‚Üí Integrations ‚Üí OpenAI Voice ‚Üí Redownload

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Home Assistant

```bash
ha core restart
```

–ò–ª–∏ —á–µ—Ä–µ–∑ UI:
- Settings ‚Üí System ‚Üí Restart

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

1. Settings ‚Üí Devices & Services
2. + Add Integration
3. –ù–∞–π–¥–∏—Ç–µ "OpenAI Voice Assistant Proxy"
4. **–î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-5 –º–∏–Ω—É—Ç)
5. –í–≤–µ–¥–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (OpenAI API key –∏ –¥—Ä.)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
tail -f /config/home-assistant.log | grep openai_voice_proxy
```

–ò–ª–∏ —á–µ—Ä–µ–∑ UI:
- Settings ‚Üí System ‚Üí Logs
- –ù–∞–π–¥–∏—Ç–µ "openai_voice_proxy"

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### "No module named 'fastapi'"
‚Üí –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (—Å–º. –®–∞–≥ 2)

### "Failed to start FastAPI server"
‚Üí –ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
netstat -tulpn | grep 8000
```

### "Invalid API key"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ OpenAI API key –Ω–∞ platform.openai.com

### "Cannot import name 'OpenAIVoiceProxyConfigEntry'"
‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–æ–≤. –û–±–Ω–æ–≤–∏—Ç–µ (–®–∞–≥ 1)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip3 install openai aiohttp
```

2. –û—Ç–∫–ª—é—á–∏—Ç–µ FastAPI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
   - –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç FastAPIManager –≤ __init__.py
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ conversation platform

3. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

## –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

- GitHub Issues: https://github.com/yourusername/openai-proxy-ha/issues
- –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ Settings ‚Üí System ‚Üí Logs
- –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏—é Home Assistant: Settings ‚Üí Info

---

**–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —É–¥–∞–ª–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª** ‚úÖ
